<!-- fabric编辑器 zjfree 2022-10-17 -->
<!DOCTYPE html>
<html lang="zh-CN">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="renderer" content="webkit">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>fabric编辑器</title>

	<link href="https://lib.baomitu.com/normalize/latest/normalize.min.css" rel="stylesheet">
	<link href="../static/css/fabric_editor.css" rel="stylesheet">
	<style>
		/* css style */
	</style>

	<script src="https://lib.baomitu.com/jquery/3.4.1/jquery.min.js"></script>
	<script src="https://lib.baomitu.com/fabric.js/5.2.4/fabric.min.js"></script>
	<script src="../static/js/fabric_editor.js"></script>
</head>

<body>

	<!-- 编辑器区域 -->
	<div id="divMainEditor">
		<canvas id="myCanvas">
			Your browser does not support the HTML5 canvas tag.
		</canvas>
	</div>

	<!-- 左侧导航 -->
	<div id="divMainLeft">
		<h3 class="title">fabric编辑器</h3>
		<div id="divBtnList" class="block">
			<button onclick="Feditor.deleteAll();">清空所有</button>
			<button onclick="Feditor.reload();">重新加载</button>
			<button onclick="Feditor.save();">保存</button>
			<hr>
			<button onclick="Feditor.addRect();">添加 Rect</button>
			<button onclick="Feditor.addCircle();">添加 Circle</button>
			<button onclick="Feditor.addTriangle();">添加 Triangle</button>
			<button onclick="Feditor.addEllipse();">添加 Ellipse</button>
			<button onclick="Feditor.addLine();">添加 Line</button>
			<button onclick="Feditor.addPolygon();">添加 Polygon</button>
			<button onclick="Feditor.addPolyline(20);">添加 Polyline</button>
			<button onclick="Feditor.addRing(0, 300, 400, 200, 10, 60);">添加 Ring</button>
			<button onclick="Feditor.addRing(0, 360, 200, 200, 30, 60);">添加 Ring</button>
			<button onclick="Feditor.addText();">添加 Text</button>
			<button onclick="Feditor.addPath();">添加 Path</button>
			<button onclick="Feditor.addTextbox();">添加 Textbox</button>
			<button onclick="Feditor.addImage();">添加 Image</button>
			<button onclick="Feditor.addImage('http://fabricjs.com/assets/dragon.jpg');">添加 Image2</button>
			<button onclick="Feditor.addImage('../static/img/test.svg');">添加 ImageSvg</button>
			<button onclick="Feditor.addButton();">添加 Button</button>
			<button onclick="Feditor.addPipe();">添加 Pipe</button>
			<button onclick="Feditor.addTextRect();">添加 TextRect</button>
			<button onclick="Feditor.addRectRule();">添加 RectRule</button>
		</div>
		<div id="divStatus" class="block">就绪</div>
	</div>

	<!-- 右侧属性框 -->
	<div id="divMainRight">
		<div class="block" style="font-size:14px;">
			<button onclick="Feditor.copy();">复制</button>
			<button onclick="Feditor.delete();">删除</button>
			<button onclick="Feditor.toGroup();">组合</button>
			<button onclick="Feditor.splitGroup();">拆分</button>
			<br>
			<button onclick="Feditor.bringToFront();">置顶</button>
			<button onclick="Feditor.bringForward();">上层</button>
			<button onclick="Feditor.sendToBack();">置底</button>
			<button onclick="Feditor.sendBackwards();">下层</button>
			<br>
			<button onclick="Feditor.align('left');">左</button>
			<button onclick="Feditor.align('right');">右</button>
			<button onclick="Feditor.align('top');">上</button>
			<button onclick="Feditor.align('bottom');">下</button>
			<button onclick="Feditor.align('vcenter');">竖直</button>
			<button onclick="Feditor.align('hcenter');">水平</button>
			<br>
			<button onclick="Feditor.align('mhcenter');">水平居中</button>
			<button onclick="Feditor.align('mvcenter');">竖直居中</button>
			<br>
			<button onclick="Feditor.align('mhavg');">水平均分</button>
			<button onclick="Feditor.align('mvavg');">竖直均分</button>
			<br>
			<button onclick="">复制样式</button>
			<button onclick="">粘贴样式</button>
			<br>
		</div>
		<div id="divAttrList" class="block">

			<div class="attr-group">
				<h3>基础属性 <span class="h3-btn" onclick="Feditor.attrReset();">Reset</span></h3>
				<table>
					<tr>
						<th>距左:</th>
						<td><input class="attr" id="attr_left" type="number" value="0" /></td>
						<th>距顶:</th>
						<td><input class="attr" id="attr_top" type="number" value="0" /></td>
					</tr>
					<tr>
						<th>宽度:</th>
						<td><input class="attr" id="attr_width" type="number" value="0" /></td>
						<th>高度:</th>
						<td><input class="attr" id="attr_height" type="number" value="0" /></td>
					</tr>
					<tr>
						<th>X缩放:</th>
						<td><input class="attr" id="attr_scaleX" type="number" value="0" data-fix="2" /></td>
						<th>Y缩放:</th>
						<td><input class="attr" id="attr_scaleY" type="number" value="0" data-fix="2" /></td>
					</tr>
					<tr>
						<th>X翻转:</th>
						<td><input class="attr" id="attr_flipX" type="checkbox" value="1" /></td>
						<th>Y翻转:</th>
						<td><input class="attr" id="attr_flipY" type="checkbox" value="1" /></td>
					</tr>
					<tr>
						<th>X倾斜:</th>
						<td><input class="attr" id="attr_skewX" type="number" value="0" data-fix="2" /></td>
						<th>Y倾斜:</th>
						<td><input class="attr" id="attr_skewY" type="number" value="0" data-fix="2" /></td>
					</tr>
					<tr>
						<th>X对齐:</th>
						<td>
							<select class="attr" id="attr_originX">
								<option value="left">left</option>
								<option value="center">center</option>
								<option value="right">right</option>
							</select>
						</td>
						<th>Y对齐:</th>
						<td>
							<select class="attr" id="attr_originY">
								<option value="top">top</option>
								<option value="center">center</option>
								<option value="bottom">bottom</option>
							</select>
						</td>
					</tr>
					<tr>
						<th>旋转角度:</th>
						<td colspan="3"><input class="attr" id="attr_angle" type="number" value="0" /></td>
					</tr>
				</table>

			</div>

			<div class="attr-group">
				<h3>样式属性</h3>
				<table>
					<tr>
						<th>填充颜色:</th>
						<td><input class="attr" id="attr_fill" type="text" value="" /></td>
						<th>不透明度:</th>
						<td><input class="attr" id="attr_opacity" type="number" value="1" data-fix="2" /></td>
					</tr>
					<tr>
						<th>边框颜色:</th>
						<td><input class="attr" id="attr_stroke" type="text" value="" /></td>
						<th>边框宽度:</th>
						<td><input class="attr" id="attr_strokeWidth" type="number" value="1" data-fix="2" /></td>
					</tr>
					<tr>
						<th>阴影:</th>
						<td colspan="3"><input class="attr" id="attr_shadow" type="text" value="" /></td>
					</tr>
				</table>
			</div>

			<div class="attr-group">
				<h3>画板属性</h3>
				<table>
					<tr>
						<th>宽度:</th>
						<td><input class="attrPage" id="attrPage_width" type="number" value="0" /></td>
						<th>高度:</th>
						<td><input class="attrPage" id="attrPage_height" type="number" value="0" /></td>
					</tr>
					<tr>
						<th>背景色:</th>
						<td><input class="attrPage" id="attrPage_backgroundColor" type="text" value="" /></td>
						<th>放大系数:</th>
						<td><input class="attrPage" id="attrPage_zoom" type="number" value="1" step="0.01" /></td>
					</tr>
				</table>
			</div>

			<div class="attr-group">
				<h3>属性绑定</h3>
				<table>
					<tr>
						<th>是否显示:</th>
						<td><input class="attrBind" id="attrBind_visable" type="text" value="1" /></td>
						<th>不透明度:</th>
						<td><input class="attrBind" id="attrBind_opacity" type="text" value="1" /></td>
					</tr>
					<tr>
						<th>动画1:</th>
						<td colspan="3"><input class="attrBind" id="attrBind_am1" type="text" value="" /></td>
					</tr>
					<tr>
						<th>动画2:</th>
						<td colspan="3"><input class="attrBind" id="attrBind_am2" type="text" value="" /></td>
					</tr>
					<tr>
						<th>动画3:</th>
						<td colspan="3"><input class="attrBind" id="attrBind_am3" type="text" value="" /></td>
					</tr>
				</table>
			</div>

			<div class="attr-group attr-type attr-type-text">
				<h3>文字属性</h3>
				<table>
					<tr>
						<th>文字内容:</th>
						<td colspan="3"><textarea class="attr" id="attr_text"></textarea></td>
					</tr>
					<tr>
						<th>字背景色:</th>
						<td><input class="attr" id="attr_textBackgroundColor" type="text" value="" /></td>
						<th>文字大小:</th>
						<td><input class="attr" id="attr_fontSize" type="number" value="1" data-fix="2" /></td>
					</tr>
					<tr>
						<th>样式:</th>
						<td>
							<select class="attr" id="attr_fontStyle">
								<option value="normal">normal</option>
								<option value="italic">italic</option>
								<option value="oblique">oblique</option>
							</select>
						</td>
						<th>行高:</th>
						<td><input class="attr" id="attr_lineHeight" type="number" value="1" data-fix="2" /></td>
					</tr>
					<tr>
						<th>字体:</th>
						<td colspan="3"><input class="attr" id="attr_fontFamily" type="text" value="" /></td>
					</tr>
					<tr>
						<th>粗体:</th>
						<td>
							<select class="attr" id="attr_fontWeight">
								<option value="normal">normal</option>
								<option value="bold">bold</option>
								<option value="bolder">bolder</option>
								<option value="lighter">lighter</option>
							</select>
						</td>
						<th>对齐:</th>
						<td>
							<select class="attr" id="attr_textAlign">
								<option value="left">left</option>
								<option value="center">center</option>
								<option value="right">right</option>
							</select>
						</td>
					</tr>
					<tr>
						<th>划线:</th>
						<td colspan="3">
							&nbsp;
							<label><input class="attr" id="attr_underline" type="checkbox" value="1" /> 下划线</label>
							&nbsp;
							<label><input class="attr" id="attr_linethrough" type="checkbox" value="1" /> 中划线</label>
							&nbsp;
							<label><input class="attr" id="attr_overline" type="checkbox" value="1" /> 上划线</label>
						</td>
					</tr>
					<tr>
						<th>字间距:</th>
						<td colspan="3"><input class="attr" id="attr_charSpacing" type="number" value="1" /></td>
					</tr>
				</table>
			</div>

			<div class="attr-group attr-type attr-type-rect">
				<h3>Rect 属性</h3>
				<table>
					<tr>
						<th>RX:</th>
						<td><input class="attr" id="attr_rx" type="number" value="0" /></td>
						<th>RY:</th>
						<td><input class="attr" id="attr_ry" type="number" value="0" /></td>
					</tr>
				</table>
			</div>
			<div class="attr-group attr-type attr-type-circle">
				<h3>Circle 属性</h3>
				<table>
					<tr>
						<th>半径:</th>
						<td><input class="attr" id="attr_radius" type="number" value="0" /></td>
						<th></th>
						<td><input class="hhide" /></td>
					</tr>
				</table>
			</div>
			<div class="attr-group attr-type attr-type-ellipse">
				<h3>Ellipse 属性</h3>
				<table>
					<tr>
						<th>RX:</th>
						<td><input class="attr" id="attr_rx" type="number" value="0" /></td>
						<th>RY:</th>
						<td><input class="attr" id="attr_ry" type="number" value="0" /></td>
					</tr>
				</table>
			</div>
			<div class="attr-group attr-type attr-type-line">
				<h3>Line 属性</h3>
				<table>
					<tr>
						<th>X1:</th>
						<td><input class="attr" id="attr_x1" type="number" value="0" /></td>
						<th>Y1:</th>
						<td><input class="attr" id="attr_y1" type="number" value="0" /></td>
					</tr>
					<tr>
						<th>X2:</th>
						<td><input class="attr" id="attr_x2" type="number" value="0" /></td>
						<th>Y2:</th>
						<td><input class="attr" id="attr_y2" type="number" value="0" /></td>
					</tr>
				</table>
			</div>
			<div class="attr-group attr-type attr-type-TextRect">
				<h3>TextRect 属性</h3>
				<table>
					<tr>
						<th>RX:</th>
						<td><input class="attr" id="attr_rx" type="number" value="0" /></td>
						<th>RY:</th>
						<td><input class="attr" id="attr_ry" type="number" value="0" /></td>
					</tr>
					<tr>
						<th>文字内容:</th>
						<td><input class="attr" id="attr_text" type="text" value="" /></td>
						<th>文字颜色:</th>
						<td><input class="attr" id="attr_textFill" type="text" value="" /></td>
					</tr>
				</table>
			</div>
			<div class="attr-group attr-type attr-type-Pipe">
				<h3>Pipe 属性</h3>
				<table>
					<tr>
						<th>管道颜色:</th>
						<td><input class="attr" id="attr_pipeBackColor" type="text" value="" /></td>
						<th>流体颜色:</th>
						<td><input class="attr" id="attr_pipeColor" type="text" value="" /></td>
					</tr>
					<tr>
						<th>管道直径:</th>
						<td><input class="attr" id="attr_pipeWidth" type="number" value="" /></td>
						<th>流体透明:</th>
						<td><input class="attr" id="attr_pipeOpacity" type="number" value="1" data-fix="2" /></td>
					</tr>
				</table>
			</div>
			<div class="attr-group attr-type attr-type-temp_pipe_point">
				<h3>Pipe 属性</h3>
				<table>
					<tr>
						<th>操作:</th>
						<td colspan="3">
							<button onclick="Feditor.delPipePoint();">删除</button>
						</td>
					</tr>
				</table>
			</div>
			<div class="attr-group attr-type attr-type-image">
				<h3>Image 滤镜</h3>
				<div class="divImageFilter">
					<div>
						<label>
							<input type="checkbox" id="filter_Grayscale">
							Grayscale 灰度
						</label>
						&nbsp;
						<select name="mode">
							<option value="average">average</option>
							<option value="lightness">lightness</option>
							<option value="luminosity">luminosity</option>
						</select>
					</div>
					<div>
						<label>
							<input type="checkbox" id="filter_Invert">
							Invert 反色
						</label>
					</div>
					<div>
						<label>
							<input type="checkbox" id="filter_Sepia">
							Sepia 深褐色
						</label>
					</div>
					<div>
						<label>
							<input type="checkbox" id="filter_BlackWhite">
							Black/White 黑白
						</label>
					</div>
					<div>
						<label>
							<input type="checkbox" id="filter_Brownie">
							Brownie 巧克力色
						</label>
					</div>
					<div>
						<label>
							<input type="checkbox" id="filter_Vintage">
							Vintage 老照片
						</label>
					</div>
					<div>
						<label>
							<input type="checkbox" id="filter_Kodachrome">
							Kodachrome 胶卷
						</label>
					</div>
					<div>
						<label>
							<input type="checkbox" id="filter_Technicolor">
							Technicolor 科技色
						</label>
					</div>
					<div>
						<label>
							<input type="checkbox" id="filter_Polaroid">
							Polaroid 宝丽来
						</label>
					</div>
					<div>
						<label>
							<input type="checkbox" id="filter_RemoveColor">
							Remove 颜色移除
						</label>
						<p>
							<input type="color" name="color" value="#00f900">
						</p>
						<p>
							<input type="range" name="distance" value="0.02" min="0" max="1" step="0.01">
						</p>
					</div>
					<div>
						<label>
							<input type="checkbox" id="filter_Brightness">
							Brightness 亮度
						</label>
						<p>
							<input type="range" name="brightness" value="0.1" min="-1" max="1" step="0.003921" >
						</p>
					</div>
					<div>
						<label>
							<input type="checkbox" id="filter_Gamma">
							Gamma 伽马修正
						</label>
						<p>
							<input type="range" name="Gamma_red" value="1" min="0.2" max="2.2" step="0.003921" >
							<input type="range" name="Gamma_green" value="1" min="0.2" max="2.2" step="0.003921" >
							<input type="range" name="Gamma_blue" value="1" min="0.2" max="2.2" step="0.003921" >
						</p>
					</div>
					<div>
						<label>
							<input type="checkbox" id="filter_Contrast">
							Contrast 对比度
						</label>
						<p>
							<input type="range" name="contrast" value="0" min="-1" max="1" step="0.003921" >
						</p>
					</div>
					<div>
						<label>
							<input type="checkbox" id="filter_Saturation">
							Saturation 饱和度
						</label>
						<p>
							<input type="range" name="saturation" value="0" min="-1" max="1" step="0.003921" >
						</p>
					</div>
					<div>
						<label>
							<input type="checkbox" id="filter_Vibrance">
							Vibrance 自然饱和度
						</label>
						<p>
							<input type="range" name="vibrance" value="0" min="-1" max="1" step="0.003921" >
						</p>
					</div>
					<div>
						<label>
							<input type="checkbox" id="filter_HueRotation">
							Hue 色相
						</label>
						<p>
							<input type="range" name="rotation" value="0" min="-2" max="2" step="0.002" >
						</p>
					</div>
					<div>
						<label>
							<input type="checkbox" id="filter_Noise">
							Noise 噪音
						</label>
						<p>
							<input type="range" name="noise" value="100" min="0" max="1000" >
						</p>
					</div>
					<div>
						<label>
							<input type="checkbox" id="filter_Pixelate">
							Pixelate 马赛克
						</label>
						<p>
							<input type="range" name="blocksize" value="4" min="2" max="100" >
						</p>
					</div>
					<div>
						<label>
							<input type="checkbox" id="filter_Blur">
							Blur 模糊
						</label>
						<p>
							<input type="range" name="blur" value="0.1" min="0" max="1" step="0.01" >
						</p>
					</div>
					<div>
						<label>
							<input type="checkbox" id="filter_Convolute">
							Emboss 浮雕
						</label>
					</div>
					<div>
						<label>
							<input type="checkbox" id="filter_BlendColor">
							Blend Color 混合颜色
						</label>
						<p>
							<select name="mode">
								<option selected value="add">Add</option>
								<option value="diff">Diff</option>
								<option value="subtract">Subtract</option>
								<option value="multiply">Multiply</option>
								<option value="screen">Screen</option>
								<option value="lighten">Lighten</option>
								<option value="darken">Darken</option>
								<option value="overlay">Overlay</option>
								<option value="exclusion">Exclusion</option>
								<option value="tint">Tint</option>
							</select>
							&nbsp;
							<input type="color" name="color" value="#00f900">
						</p>
						<p>
							<input type="range" name="alpha" min="0" max="1" value="1" step="0.01" >
						</p>
					</div>
				</div>

			</div>
		</div>
	</div>

	<script>

		var FeditorData = {
			elIndex: 1,
			page: {
				width: 1000,
				height: 600,
				zoom: 1,
			},
			list: [],
		};

		$(function () {
			// JS
			Feditor.init($('#myCanvas'));
			Feditor.reload();

			window.setInterval(function () {
				let str = '共' + Feditor.canvas._objects.length + '个元素；';
				let obj = Feditor.canvas.getActiveObject();
				if (obj != null) {
					if (obj.type == 'activeSelection') {
						str += '选中' + obj.size() + '个'
					}
					else {
						str += '选中:' + obj.type;
					}
				}
				$('#divStatus').html(str);
			}, 500);
		});

	</script>

</body>

</html>